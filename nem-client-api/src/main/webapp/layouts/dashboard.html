<main class="dashboard-main">
	<div class="container gridster">
		<ul class="dashboard js-dashboard">
			<li class="tile tile--assets" data-row="1" data-col="1" data-sizex="1" data-sizey="1">
				<article>
					<h1 class="tile-title">{{texts.dashboard.assets.title}} ({{mosaics.owned.length}})</h1>
					<table class="txList">
					
					<tbody>
					{{#each mosaics.owned:i}}
					{{#if i < 4}}
						<tr class="txList-row">
						<td class="txList-cell">
							<a class="hyperlink--default" href="javascript:;" on-click="redirect:'namespaces-mosaics', {{params}}">{{.namespaceId}}:{{.name}}</a>
						</td>
						<td>
							{{.quantity}}
						</td>
						</tr>
					{{/if}}
					{{/each}}
					</tbody>
					</table>
				</article>
			</li>

			<li class="tile tile--importance" data-row="1" data-col="2" data-sizex="2" data-sizey="1">
				<article>
					<h1 class="tile-title">{{texts.dashboard.importance.title}}</h1>

                    <button type="button" class="importanceTile-activateButton icon-link" on-click="openActivateDelegated()">{{texts.dashboard.importance.remoteHarvest.title}}</button>
                    {{#activeAccount.remoteStatus === 'ACTIVATING'}}
                    <span class="importanceTile-activateStatus icon-clock">{{texts.dashboard.importance.remoteHarvest.activating}}</span>
                    {{/}}
                    {{#activeAccount.remoteStatus === 'DEACTIVATING'}}
                    <span class="importanceTile-activateStatus icon-clock">{{texts.dashboard.importance.remoteHarvest.deactivating}}</span>
                    {{/}}
                    {{#activeAccount.remoteStatus === 'ACTIVE'}}
                    <span class="importanceTile-activateStatus">{{texts.dashboard.importance.remoteHarvest.active}}</span>
                    {{/}}

                    <div class="importanceTile-harvest">
						{{#if activeAccount.remoteStatus === 'ACTIVE'}}
							{{#if walletPage.remoteUnlocked}}
								<button type="button" class="importanceTile-harvestButton importanceTile-harvestButton--harvesting icon-pause-circled" on-click="stopRemoteHarvesting" disabled="{{walletPage.harvestButtonProcessing}}">
									{{texts.dashboard.importance.remoteHarvest.stopRemoteHarvesting}}
								</button>
							{{else}}
								<button type="button" class="importanceTile-harvestButton importanceTile-harvestButton--notHarvesting icon-play-circled" on-click="startRemoteHarvesting" disabled="{{walletPage.harvestButtonProcessing}}">{{texts.dashboard.importance.remoteHarvest.startRemoteHarvesting}}</button>
							{{/if}}
						{{else}}
							{{#if status.lostConnection || nisUnavailable || activeAccount.status === 'UNKNOWN'}}
								<button type="button" class="importanceTile-harvestButton icon-help-circled" disabled>
									<span>{{texts.dashboard.importance.unknown}}</span>
								</button>
							{{else}}
								{{#if activeAccount.status === 'LOCKED'}}
									<button type="button" class="importanceTile-harvestButton importanceTile-harvestButton--notHarvesting icon-play-circled" on-click="startHarvesting" disabled="{{walletPage.harvestButtonProcessing}}">
										<span>{{texts.dashboard.importance.start}}</span>
									</button>
								{{/if}}
								{{#if activeAccount.status === 'UNLOCKED'}}
									<button type="button" class="importanceTile-harvestButton importanceTile-harvestButton--harvesting icon-pause-circled" on-click="stopHarvesting" disabled="{{walletPage.harvestButtonProcessing}}">
										{{texts.dashboard.importance.stop}}
									</button>
								{{/if}}
							{{/if}}
						{{/if}}
					</div>

					<div class="importanceTile-content">
						<p class="importanceTile-importanceScore">
                            {{#if status.lostConnection || nisUnavailable || activeAccount.status === 'UNKNOWN'}}&hellip;&nbsp;
                            {{else}}{{Math.round(activeAccount.importance * 1000000) / 100}} &#8241;
                            {{/if}}
                        </p>
						<p class="importanceTile-description">{{texts.dashboard.importance.description}}</p>
					</div>
				</article>
			</li>

			<li class="tile tile--transactions" data-row="2" data-col="1" data-sizex="3" data-sizey="2">
				<article>
					<h1 class="tile-title" on-click="redirect:'transactions', {{params}}">{{texts.dashboard.transactions.title}}</h1>
					<button type="button" class="transactionsTile-sendNemButton icon-paper-plane-empty" disabled="{{sendNemDisabled}}" on-click="openSendNem()">{{texts.dashboard.transactions.sendNem}}</button>
                    <button type="button" class="transactionsTile-convertMultisigButton icon-magic" disabled="{{sendNemDisabled}}" on-click="openConvertMultisig()">{{texts.wallet.actions.convertMultisig}}</button>
					<div class="transactionsTile-overview">
						<h1 class="transactionsTile-balanceLabel">{{texts.dashboard.transactions.balance}}
                            {{#activeAccount.isMultisig}}
                            <span class="transactionsTile-multisig">
                                ({{texts.dashboard.transactions.accountCosignatories}}
                                <a class="hyperlink--default" href="javascript:;" on-click="viewAccount(activeAccount.address)">{{texts.dashboard.transactions.accountCosignatoriesView}}</a>)
                            </span>
                            {{/}}
                        </h1>
						<p>
							<span class="transactionsTile-balance" title="{{activeAccount.formattedBalanceInt}} XEM {{activeAccount.balanceDec}} ÂµXEM" on-mouseover="registerToolTip">
								{{activeAccount.formattedBalance}} 
								<span class="unit">XEM</span>
							</span>
                            <span class="transactionsTile-balanceAccurate">{{#appStatus.type === 'warning'}}({{texts.dashboard.transactions.notSynced}}){{/}}</span>
						</p>
                        <p>
                            <span>{{texts.dashboard.transactions.vestedBalance}} {{activeAccount.formattedVestedBalance}}</span>
                        </p>
					</div>
					<table class="txList">
						<tr>
							<th class="txList-header txList-col--type">{{texts.dashboard.transactions.columns.0}}</th>
							<th class="txList-header txList-col--date">{{texts.dashboard.transactions.columns.1}}</th>
							<th class="txList-header txList-col--sender">{{texts.dashboard.transactions.columns.2}}</th>
							<th class="txList-header txList-col--message">{{texts.dashboard.transactions.columns.3}}</th>
                            <th class="txList-header txList-col--amount">{{texts.dashboard.transactions.columns.8}} <span class="dimmed">(XEM)</span></th>
							<th class="txList-header txList-col--encrypted">{{texts.dashboard.transactions.columns.4}}</th>
							<th class="txList-header">{{texts.dashboard.transactions.columns.5}}</th>
							<th class="txList-header txList-col--confirmations">{{texts.dashboard.transactions.columns.6}}</th>
							<th class="txList-header txList-col--fee">{{texts.dashboard.transactions.columns.7}} <span class="dimmed">(XEM)</span></th>
						</tr>
						{{#each activeAccount.transactions:i}}
							{{#if i < 4}}
								<tr>
                                    {{#if (.type === TransactionType.Transfer || .type === TransactionType.Multisig_Transfer)}}
                                    {{>transferTransactionLinePartial}}
                                    {{/if}}

                                    {{#if (.type === TransactionType.Importance_Transfer || .type === TransactionType.Multisig_Importance_Transfer)}}
                                    {{>importanceTransferLinePartial}}
                                    {{/if}}

                                    {{#if (.type === TransactionType.Aggregate_Modification || .type === TransactionType.Multisig_Aggregate_Modification)}}
                                    {{>aggregateModificationLinePartial}}
                                    {{/if}}

                                    {{#if (.type === TransactionType.Provision_Namespace || .type === TransactionType.Multisig_Provision_Namespace)}}
                                    {{>provisionNamespaceLinePartial}}
                                    {{/if}}

                                    {{#if (.type === TransactionType.Mosaic_Creation || .type === TransactionType.Multisig_Mosaic_Creation)}}
                                    {{>mosaicCreationLinePartial}}
                                    {{/if}}

                                    {{#if (.type === TransactionType.Mosaic_Supply || .type === TransactionType.Multisig_Mosaic_Supply)}}
                                    {{>mosaicSupplyLinePartial}}
                                    {{/if}}

                                    <td class="txList-cell txList-col--encrypted encryptedIcon">
                                        {{#.encrypted}}
                                        <span class="icon-lock" title="{{texts.dashboard.transactions.encrypted}}" on-mouseover="registerToolTip"></span>
                                        {{/}}
                                    </td>

                                    {{! FIELD DETAILS }}
                                    <td class="txList-cell txList-col--details">
                                        <a class="hyperlink--default" href="javascript:;" on-click="viewTransaction(.)">{{texts.dashboard.transactions.view}}</a>
                                    </td>

                                    {{! FIELD CONFIRMATIONS }}
                                    <td class="txList-col--confirmations">
                                        {{#if .confirmed}}
                                            {{#if blockchainHeight}}
                                                {{blockchainHeight - .blockHeight + 1}}
                                            {{else}}
                                                {{texts.dashboard.transactions.confirmationsUnknown}}
                                            {{/if}}
                                        {{else}}
                                            {{texts.dashboard.transactions.pending}}
                                        {{/if}}
                                    </td>

                                    {{! FIELD FEES }}
                                    <td class="txList-cell txList-col--fee">
                                        {{#if .isMultisig}}
                                            {{#if .confirmed}}
                                                {{{multisig.formattedTotalFees}}}
                                            {{else}}
                                                n/a
                                            {{/if}}
                                        {{else}}
                                            {{#.isOutgoing || .isSelf}}-{{/}}{{{formattedFee}}}
                                        {{/if}}
                                    </td>
                                </tr>
							{{/if}}
						{{/each}}
					</table>
					{{#if activeAccount.transactions.length > 4 }}
						<p class="txList-seeAll"><a href="javascript:;" on-click="redirect:'transactions'">{{texts.dashboard.transactions.seeAll}} <span class="txList-seeAll-arrow icon-right-dir"></span></a></p>
					{{/if}}
					{{^activeAccount.transactions}}
						<p class="txList-noRecords">{{texts.dashboard.transactions.noTransactions}}</p>
					{{/}}
				</article>
			</li>
			<li class="tile tile-nemValue" data-row="4" data-col="1" data-sizex="2" data-sizey="2">
				<article>
					<h1 class="tile-title">{{texts.dashboard.nemValue.title}}</h1>
					<!--/*<p class="value">
						4,158,666,000
						<select id="nem-value-unit-chooser" class="unit">
							<option value="btc">BTC</option>
							<option value="usd">USD</option>
							<option value="eur">EUR</option>
						</select>
						<span class="variation">
							<span class="variation-amount">15%</span>
							<span class="variation-arrow icon-arrow-down"></span>
						</span>
					</p>
					<div id="nem-value-chart"></div>*/-->
					<p class="notAvailableMessage notAvailableMessage--whole">{{texts.dashboard.notAvailable}}</p>
				</article>
			</li>
			<li class="tile tile-messages" data-row="5" data-col="3" data-sizex="1" data-sizey="1">
				<article>
					<h1 class="icon-mail tile-title" title="{{texts.dashboard.messages.titleTooltip}}" on-mouseover="registerToolTip"></h1>
					<!--/*<div class="message-preview">
						<div class="viewport">
							<ul class="overview">
								<li>
									<article class="message">
										<p>
											&#8220;Are you willing to send me 1 coin in advance for the party tomorrow&#8221;
											<a class="read-more" href="javascripts:;">Read more</a>
										</p>
										<footer>
											<a href="account" class="sender">
												<span>@Johny</span>
												<img src="assets/ava_1.png" alt="Willy Tran" />
											</a>
										</footer>
									</article>
								</li>
								<li>
									<article class="message">
										<p>
											&#8220;Are you willing to send me 1 coin in advance for the party tomorrow&#8221;
										</p>
										<footer>
											<a href="account" class="sender">
												<span>@William Cuong</span>
												<img src="assets/ava_1.png" alt="Willy Tran" />
											</a>
										</footer>
									</article>
								</li>
								<li>
									<article class="message">
										<p>
											&#8220;Are you willing to send me 1 coin in advance for the party tomorrow&#8221;
										</p>
										<footer>
											<a href="account" class="sender">
												<span>@Loi</span>
												<img src="assets/ava_1.png" alt="Willy Tran" />
											</a>
										</footer>
									</article>
								</li>
							</ul>
						</div>
						<ul class="bullets">
							<li><a href="javascript:;" class="bullet" data-slide="0"></a></li>
							<li><a href="javascript:;" class="bullet" data-slide="1"></a></li>
							<li><a href="javascript:;" class="bullet" data-slide="2"></a></li>
						</ul>
					</div>*/-->
					<p class="notAvailableMessage notAvailableMessage--whole">{{texts.dashboard.notAvailable}}</p>
				</article>
			</li>
			<!--/*<li class="tile apps" data-row="5" data-col="3" data-sizex="1" data-sizey="1">
				<article>
					<h1 class="tile-title">NEM applications</h1>
					<div class="scrollable">
						<ul>
							<li>
								<article class="app">
									<div class="app-icon">
										<a href="app"><img src="assets/appicon_1.png" alt="App name"></a>
									</div>
									<div class="app-info">
										<a href="app"><h1 title="App Name Goes Here">App Name Goes Here</h1></a>
										<p class="vendor-name">Vendor Name</p>
									</div>
									<div class="delete-button">
										<a class="icon-trash" href="javascript:;"></a>
									</div>
								</article>
							</li>
							<li>
								<article class="app">
									<div class="app-icon">
										<a href="app"><img src="assets/appicon_1.png" alt="App name"></a>
									</div>
									<div class="app-info">
										<a href="app"><h1 title="App Name Goes Here">App Name Goes Here</h1></a>
										<p class="vendor-name">Vendor Name</p>
									</div>
									<div class="delete-button">
										<a class="icon-trash" href="javascript:;"></a>
									</div>
								</article>
							</li>
							<li>
								<article class="app">
									<div class="app-icon">
										<a href="app"><img src="assets/appicon_1.png" alt="App name"></a>
									</div>
									<div class="app-info">
										<a href="app"><h1 title="App Name Goes Here">App Name Goes Here</h1></a>
										<p class="vendor-name">Vendor Name</p>
									</div>
									<div class="delete-button">
										<a class="icon-trash" href="javascript:;"></a>
									</div>
								</article>
							</li>
						</ul>
					</div>
					<p class="notAvailableMessage notAvailableMessage--whole">{{.notAvailable}}</p>
				</article>
			</li>*/-->
			<li class="tile tile-news" data-row="4" data-col="3" data-sizex="1" data-sizey="1">
				<article>
					<h1 class="icon-megaphone tile-title" title="{{texts.dashboard.news.titleTooltip}}" on-mouseover="registerToolTip"></h1>
					<div class="news-preview">
						<div class="viewport">
                            <!--
							<ul class="overview">
								<li>
									<article class="news-article">
									-->
										<h2>Latest stable release:</h2>
										<h1>{{latestVersion}}</h1>
                                <!--
                                    </article>
                                </li>
                            </ul>
                            -->
						</div>
						<ul class="bullets">
							<li><a href="javascript:;" class="bullet" data-slide="0"></a></li>
							<!-- <li><a href="javascript:;" class="bullet" data-slide="1"></a></li>
							<li><a href="javascript:;" class="bullet" data-slide="2"></a></li>
							-->
						</ul>
					</div>
				</article>
			</li>
			<!--/*<li class="tile send" data-row="3" data-col="1" data-sizex="1" data-sizey="3">
				<article>
					<h1 class="tile-title">Send NEM</h1>
					<div class="content">
						<div class="form-control amount">
							<input type="text" placeholder="Amount" value="{{sendTransactionForm.amount}}" on-change={{formInputChange}} /><span class="unit">NEM</span>
						</div>
						<input type="text" placeholder="Recipient's account" class="recipient form-control" />
						<textarea placeholder="Message" class="form-control" value="{{sendTransactionForm.message}}"></textarea>
						<div class="form-control fee">
							<label>Fee</label><input value="{{sendTransactionForm.fee}}" /><span class="unit">NEM</span>
						</div>
						<a href="javascript:;" class="set-fee" on-click="resetFee">Reset to minimum fee</a>
						<div class="form-control due-by">
							<label>Due by (hours)</label><input value="{{sendTransactionForm.dueBy}}" min="0" />
						</div>
						<input type="password" placeholder="Password" class="form-control" value="{{sendTransactionForm.password}}" on-keypress="sendFormKeypress" />
						<div class="submit">
							<button type="button" on-click="sendTransaction">Send</button>
						</div>
					</div>
				</article>
			</li>*/-->
		</ul>
	</div>
</main>
